<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ user.name }} - Modern Resume</title>
    <style>
        @page {
            margin: 0;
            size: A4;
        }
        body { 
            font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; 
            font-size: 11pt;
            line-height: 1.5;
            display: flex;
        }
        .sidebar {
            width: 35%;
            background-color: #f2f2f2;
            padding: 30px;
            color: #333;
        }
        .main-content {
            width: 65%;
            padding: 30px;
        }
        .sidebar h1 {
            font-size: 28pt;
            margin-bottom: 5px;
            color: #1a1a1a;
        }
        .sidebar h2 {
            font-size: 14pt;
            margin-top: 0;
            margin-bottom: 30px;
            font-weight: normal;
            border: none;
        }
        .sidebar h3 {
            font-size: 12pt;
            border-bottom: 1px solid #ccc;
            padding-bottom: 5px;
            margin-top: 25px;
        }
        .sidebar p, .sidebar a {
            font-size: 10pt;
            margin: 5px 0;
            word-wrap: break-word;
        }
        .sidebar a {
            color: #333;
            text-decoration: none;
        }
        .main-content h2 {
            font-size: 14pt;
            color: #333;
            border-bottom: 2px solid #333;
            padding-bottom: 5px;
            margin-top: 0;
            margin-bottom: 15px;
        }
        .item {
            margin-bottom: 20px;
        }
        .item h3 {
            font-size: 12pt;
            margin: 0;
        }
        .item .subtitle {
            font-size: 11pt;
            font-weight: bold;
            color: #555;
            margin: 0 0 5px 0;
        }
        .item p {
            margin: 0;
        }
    </style>
</head>
<body>
    <div class="sidebar">
        <h1>{{ user.name }}</h1>
        <h2>{{ user.title }}</h2>

        <h3>Contact</h3>
        <p><strong>Phone:</strong> {{ user.phone }}</p>
        <p><strong>Email:</strong> {{ user.email }}</p>
        <p><strong>Location:</strong> {{ user.location }}</p>
        {% if user.linkedin_url %}<p><a href="{{ user.linkedin_url }}"><strong>LinkedIn</strong></a></p>{% endif %}
        {% if user.github_url %}<p><a href="{{ user.github_url }}"><strong>GitHub</strong></a></p>{% endif %}

        {% if user.educations %}
        <h3>Education</h3>
        {% for edu in user.educations %}
        <div class="item">
            <p><strong>{{ edu.program_name }}</strong></p>
            <p>{{ edu.university }}</p>
            <p><em>{{ edu.date_range }}</em></p>
            <p>Grade: {{ edu.grade }}</p>
        </div>
        {% endfor %}
        {% endif %}

        {% if user.skills %}
        <h3>Skills</h3>
        {% set skills_dict = user.skills | fromjson %}
        {% for category, skills in skills_dict.items() %}
            <p><strong>{{ category }}:</strong> {{ skills }}</p>
        {% endfor %}
        {% endif %}
    </div>

    <div class="main-content">
        <div class="section">
            <h2>Professional Summary</h2>
            <p>{{ user.about_me }}</p>
        </div>

        {% if user.experiences %}
        <div class="section">
            <h2>Work Experience</h2>
            {% for exp in user.experiences %}
            <div class="item">
                <h3>{{ exp.role }}</h3>
                <p class="subtitle">{{ exp.company }} | {{ exp.date_range }}</p>
                <div>{{ exp.description | safe }}</div>
            </div>
            {% endfor %}
        </div>
        {% endif %}

        {% if user.projects %}
        <div class="section">
            <h2>Projects</h2>
            {% for proj in user.projects %}
            <div class="item">
                <h3>{{ proj.project_name }}</h3>
                <p>{{ proj.description }}</p>
                <p><strong>Technologies:</strong> {{ proj.skills }}</p>
                {% if proj.link %}<p><a href="{{ proj.link }}">Project Link</a></p>{% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}
        
        {% if user.certificates %}
        <div class="section">
            <h2>Certificates</h2>
            {% for cert in user.certificates %}
            <div class="item">
                <h3>{{ cert.name }}</h3>
                <p class="subtitle">{{ cert.issuer }} | {{ cert.date }}</p>
                {% if cert.link %}<p><a href="{{ cert.link }}">View Credential</a></p>{% endif %}
            </div>
            {% endfor %}
        </div>
        {% endif %}
    </div>
</body>
</html>