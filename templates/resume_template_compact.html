<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{ user.name }} - Compact Resume</title>
    <style>
        body { 
            font-family: 'Times New Roman', Times, serif; 
            font-size: 10.5pt;
            line-height: 1.4;
        }
        .header {
            text-align: center;
            margin-bottom: 15px;
        }
        h1 {
            margin: 0;
            font-size: 24pt;
        }
        .contact-info {
            margin: 2px 0;
            font-size: 10pt;
        }
         .contact-info a {
            color: #333;
            text-decoration: none;
        }
        h2 {
            font-size: 14pt;
            text-transform: uppercase;
            letter-spacing: 1px;
            border-bottom: 1px solid #000;
            padding-bottom: 2px;
            margin-top: 15px;
            margin-bottom: 8px;
        }
        .section {
            margin-bottom: 10px;
        }
        .item {
            margin-bottom: 8px;
        }
        .item-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 2px;
        }
        .item-header h3 {
            font-size: 11pt;
            margin: 0;
            font-weight: bold;
        }
        .item-header p {
            font-size: 11pt;
            margin: 0;
            font-weight: bold;
        }
        .subtitle {
            font-style: italic;
            margin-bottom: 3px;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>{{ user.name }}</h1>
        <p class="contact-info">{{ user.location }} | {{ user.phone }} | {{ user.email }}
        {% if user.linkedin_url %}| <a href="{{ user.linkedin_url }}">LinkedIn</a>{% endif %}
        {% if user.github_url %}| <a href="{{ user.github_url }}">GitHub</a>{% endif %}
        </p>
    </div>

    <div class="section">
        <h2>Summary</h2>
        <p>{{ user.about_me }}</p>
    </div>
    
    {% if user.skills %}
    <div class="section">
        <h2>Skills</h2>
        {% set skills_dict = user.skills | fromjson %}
        {% for category, skills in skills_dict.items() %}
            <div class="item">
                <p><strong>{{ category }}:</strong> {{ skills }}</p>
            </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if user.experiences %}
    <div class="section">
        <h2>Experience</h2>
        {% for exp in user.experiences %}
        <div class="item">
            <div class="item-header">
                <h3>{{ exp.role }}</h3>
                <p>{{ exp.date_range }}</p>
            </div>
            <p class="subtitle">{{ exp.company }} - {{ exp.location }}</p>
            <div>{{ exp.description | safe }}</div>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if user.projects %}
    <div class="section">
        <h2>Projects</h2>
        {% for proj in user.projects %}
        <div class="item">
            <div class="item-header">
                <h3>{{ proj.project_name }}</h3>
                 {% if proj.link %}<a href="{{ proj.link }}">Link</a>{% endif %}
            </div>
            <p class="subtitle">{{ proj.skills }}</p>
            <p>{{ proj.description }}</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if user.educations %}
    <div class="section">
        <h2>Education</h2>
        {% for edu in user.educations %}
        <div class="item">
            <div class="item-header">
                <h3>{{ edu.university }}</h3>
                <p>{{ edu.date_range }}</p>
            </div>
            <p class="subtitle">{{ edu.program_name }} ({{ edu.grade }})</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}

    {% if user.certificates %}
    <div class="section">
        <h2>Certificates</h2>
        {% for cert in user.certificates %}
        <div class="item">
             <div class="item-header">
                <h3>{{ cert.name }}</h3>
                <p>{{ cert.date }}</p>
            </div>
            <p class="subtitle">{{ cert.issuer }}</p>
        </div>
        {% endfor %}
    </div>
    {% endif %}
</body>
</html>